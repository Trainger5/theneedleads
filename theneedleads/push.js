// $(document).ready(function(){function ft(){try{$.getJSON(d,function(n){e=n.country;l=n.ip;g=n.city;nt=n.loc;tt=n.postal;it=n.region})}catch(n){e=""}}function et(n){y=n.coords.latitude;p=n.coords.longitude}function ot(){navigator.geolocation?navigator.geolocation.getCurrentPosition(et):alert("Geolocation is not supported by this browser.")}function st(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(n=>navigator.userAgent.match(n))}function b(n){for(var i="",r=new Uint8Array(n),u=r.byteLength,t=0;t<u;t++)i+=String.fromCharCode(r[t]);return window.btoa(i)}function k(){var f=navigator.appVersion;(i=t.indexOf("Chrome"))!==-1?(r="Chrome",n=t.substring(i+7)):(i=t.indexOf("MSIE"))!=-1?(r="Microsoft Internet Explorer",n=t.substring(i+5)):(i=t.indexOf("Firefox"))!=-1?r="Firefox":(i=t.indexOf("Safari"))!=-1?(r="Safari",n=t.substring(i+7),(i=t.indexOf("Version"))!=-1&&(n=t.substring(i+8))):(w=t.lastIndexOf(" ")+1)<(i=t.lastIndexOf("/"))&&(r=t.substring(w,i),n=t.substring(i+1),r.toLowerCase()===r.toUpperCase()&&(r=navigator.appName));(u=n.indexOf(";"))!==-1&&(n=n.substring(0,u));(u=n.indexOf(" "))!==-1&&(n=n.substring(0,u));o=parseInt(""+n,10);isNaN(o)&&(n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10))}function ht(n){Notification.requestPermission(function(t){t==="granted"?lt(n):alert(" Your browser does not support Push Notifications or you have blocked notifications")})}function ct(n){var t={url:"https://marketosoft.com/pushnotification/subscription.asmx/AddSubscription",method:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:"{data:'"+n+"'}"};$.ajax(t).done(function(){})}function lt(t){k();t.pushManager.getSubscription().then(function(i){i===null&&t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ut}).then(function(t){h=t.endpoint;c=b(t.getKey("p256dh"));a=b(t.getKey("auth"));f="Window";st()&&(f="Mobile");var i={clientId:rt,endpoint:h,p256dh:c,auth:a,CountryName:e,DeviceType:f,BrowserName:r,BrowserVersion:n,Latitude:y,Longitude:p,IPAddress:l};v.push(i);ct(JSON.stringify(v))}).catch(function(){})})}var s="",h="",c="",l="",a="",f="",v=[],y="",p="",d="//ipinfo.io",e="",g="",nt="",tt="",it="",t=navigator.userAgent,r=navigator.appName,n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10),w,i,u,rt="ZKn4ISKs6+K1mhdrMj0iHA==",ut="BBlqMVh7GJfYSFDwO0RbxyhQq1DzbF4J25LMCg-zCvL7C1CGNytAQ6tYK3MeQw0GEeSrMFPh9KFKJUSPVhUBwy4";"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register(s+"/ServiceWorkerClient.js")});$(function(){ft();ot();k();"serviceWorker"in navigator?navigator.serviceWorker.register(s+"/ServiceWorkerClient.js").then(n=>{Notification.permission==="blocked"?alert(" Your browser does not support Push Notifications or you have blocked notifications"):ht(n)}):alert(" Your browser does not support Push Notifications or you have blocked notifications")})});